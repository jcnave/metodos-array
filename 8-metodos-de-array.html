<script>
  console.warn("studentsObj");
  const studentsObj = [
    { id: 1, name: "John Doe", age: 23, scholarship: false },
    { id: 2, name: "Margoe Rose", age: 19, scholarship: true },
    { id: 3, name: "Kayle", age: 22, scholarship: true },
  ];
  console.log(studentsObj);

  console.warn("colaboradores");
  const colaboradores = [
    { name: "Juca", idade: 25, cargo: "front-end" },
    { name: "Márcia", idade: 23, cargo: "back-end" },
    { name: "Vitória", idade: 28, cargo: "designer" },
    { name: "Fernando", idade: 19, cargo: "estagiario" },
    { name: "Fabiane", idade: 25, cargo: "back-end" },
    { name: "Jéssica", idade: 23, cargo: "front-end" },
  ];
  console.log(colaboradores);

  console.warn("installments");
  const installments = [
    { installment_number: 1, value: 123.45, status: "Pago" },
    { installment_number: 2, value: 139.88, status: "Pago" },
    { installment_number: 3, value: 123.45, status: "Pago" },
    { installment_number: 4, value: 182.37, status: "Aberto" },
    { installment_number: 5, value: 133.93, status: "Aberto" },
  ];
  console.log(installments);

  console.warn(
    "A) Utilizando o array studentsObj fornecido anteriormente realize os seguintes exercícios:"
  );

  console.warn("1. Retornar um array de nomes existentes.");
  console.log(studentsObj.map((item) => item.name));

  console.warn("2. Retornar um array de items de estudantes que têm bolsa.");
  console.log(studentsObj.filter((item) => item.scholarship));

  console.warn(
    "3. Retornar um array de items de pessoas com menos de 23 anos."
  );
  console.log(studentsObj.filter((item) => item.age < 23));

  console.warn("4. Testar se todos são bolsistas (scholarship).");
  console.log(studentsObj.every((item) => item.scholarship));

  console.warn("5. Testar se existe algum bosista (scholarship).");
  console.log(studentsObj.some((item) => item.scholarship));

  console.warn("6. Retornar a soma de todos as idades dos alunos.");
  const agesStudents = [];
  studentsObj.map((item) => agesStudents.push(item.age));
  const valuesSum = (accumulator, currentValue) => accumulator + currentValue;
  console.log(agesStudents.reduce(valuesSum));

  console.warn("7. Retornar um array em ordem crescente de idades.");
  console.log(agesStudents.sort());

  console.warn("8. Retornar um array em ordem decrescente de idades.");
  console.log(agesStudents.reverse());

  console.warn(
    "B) Utilizando o array colaboradores fornecido anteriormente realize os seguintes exercícios:"
  );
  console.warn(
    "1. Utilizando a função reduce imprima a soma da idade de todos os colaboradores."
  );
  const agesCollaborators = [];
  colaboradores.forEach((item) => agesCollaborators.push(item.idade));
  console.log(agesCollaborators.reduce(valuesSum));

  console.warn(
    "2. Utilizando a função reduce crie e imprima um objeto que possui a quantidade de colaboradores em cada cargo. Saída esperada: { 'front-end': 2, 'back-end': 2, designer: 1, estagiario: 1 }."
  );
  const cargos = [];
  const quantCargos = [];
  colaboradores.forEach((item) => cargos.push(item.cargo));
  const countOccurrences = (array, value) =>
    array.reduce((acc, cur) => (cur === value ? acc + 1 : acc), 0);
  const reducerCargos = (accumulator, currentValue) => {
    if (!quantCargos.includes(currentValue)) {
      quantCargos[currentValue] = countOccurrences(cargos, currentValue);
    }
  };
  cargos.reduce(reducerCargos);
  console.log(Object.assign({}, quantCargos));

  console.warn(
    "C) Utilizando o array installments fornecido anteriormente realize o seguinte exercício:"
  );
  console.warn(
    "1. Utilizando a função reduce imprima o valor total das parcelas."
  );
  const plots = [];
  installments.forEach((item) => plots.push(item.value));
  const sumPlots = (accumulator, currentValue) => accumulator + currentValue;
  console.log(plots.reduce(sumPlots).toFixed(2));

  console.warn(
    "2. Utilizando a função reduce crie e imprima um objeto que possui o valor total em aberto e já pago. Saída esperada: { total_paid: 386.78, total_open: 316.3 }."
  );
  const totalValues = {
    total_paid: 0,
    total_open: 0,
  };
  const valuesPaid = [];
  const valuesOpen = [];
  installments.forEach((item) => {
    item.status == "Pago"
      ? valuesPaid.push(item.value)
      : valuesOpen.push(item.value);
  });
  totalValues.total_paid = valuesPaid.reduce(valuesSum);
  totalValues.total_open = valuesOpen.reduce(valuesSum);
  console.log("TOTAL: ", totalValues);

  console.warn(
    "D) Utilizando o array colaboradores fornecido anteriormente realize os seguintes exercícios:"
  );

  console.warn(
    "Utilizando a função sort imprima o array de colaboradores ordenado por idade de forma crescente."
  );
  console.log(
    colaboradores.sort((a, b) => {
      return a.idade - b.idade;
    })
  );

  console.warn(
    "Utilizando a função sort imprima o array de colaboradores ordenado por idade de forma decrescente."
  );
  colaboradores.sort((a, b) => {
    return a.idade - b.idade;
  });
  console.log(colaboradores.reverse());

  console.warn(
    "Utilizando a função sort imprima o array de colaboradores ordenado por cargo, sendo a ordem: estagiario (1º), front-end (2º), back-end (3º), designer (4º)."
  );
  const cargoOrdem = ["estagiario", "front-end", "back-end", "designer"];
  console.log(
    colaboradores.sort((j, k) => {
      a = cargoOrdem.indexOf(j.cargo);
      b = cargoOrdem.indexOf(k.cargo);

      return a - b;
    })
  );

  console.warn(
    "Utilizando uma única função sort imprima o array de colaboradores ordenados por idade e, em caso de empate, ordenado por cargo."
  );
  console.log(
    colaboradores.sort((a, b) => {
      if (a.idade < b.idade) {
        return -1;
      }
      if (a.idade > b.idade) {
        return 1;
      }

      if (a.cargo < b.cargo) {
        return -1;
      }
      if (a.cargo > b.cargo) {
        return 1;
      }

      return 0;
    })
  );

  console.warn(
    "E) Utilizando o array installments fornecido anteriormente realize os seguintes exercícios:"
  );

  console.warn(
    "Utilizando a função sort imprima o array de installments ordenado por valor de forma decrescente."
  );
  installments.sort((a, b) => {
    a.value - b.value;
  });
  console.log(installments.reverse());

  console.warn(
    "Utilizando a função sort imprima o array de installments ordenado por valor de forma crescente, em caso de empate, o desempate deve ocorrer pelo número da parcela de forma decrescente."
  );
  console.log(
    installments.sort((a, b) => {
      if (a.value < b.value) {
        return -1;
      }
      if (a.value > b.value) {
        return 1;
      }

      if (a.installment_number < b.installment_number) {
        return 1;
      }
      if (a.installment_number > b.installment_number) {
        return -1;
      }

      return 0;
    })
  );
</script>
